FROM nginx:latest

# Install apache2-utils for htpasswd
RUN apt-get update && apt-get install -y apache2-utils && rm -rf /var/lib/apt/lists/*

# Copy configuration
COPY deployments/nginx/nginx.conf /etc/nginx/conf.d/default.conf

# Copy certificates (these will be generated by the user/script)
COPY deployments/nginx/certs/nginx.crt /etc/nginx/certs/nginx.crt
COPY deployments/nginx/certs/nginx.key /etc/nginx/certs/nginx.key

# Copy .htpasswd (this will be generated by the user/script)
COPY deployments/nginx/.htpasswd /etc/nginx/.htpasswd
